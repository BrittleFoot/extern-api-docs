В этом разделе расскажем, что можно делать после того, как вы подготовили черновик и отправили в контролирующий орган документы, находившиеся в нем. После этих операций возникает документооборот. Также стоит отметить, что с помощью методов этого блока можно работать и с документооборотами, которые были созданы вне этого API, а, например, в веб-интерфейсе Контур.Экстерна.

## Работа с документооборотами
![Схема](https://github.com/skbkontur/extern-api-docs/blob/master/images/Схема%20работы%20с%20ДО.jpg)

Цель электронного документооборота с контролирующими органами заключается в том, чтобы доставить документ до адресата, и получить в ответ от него результаты приема и проверки этого документа. Также документооборот - вещь строго регламентированная, он подразумевает под собой обмен определенным набором документов в определенном порядке. Поэтому работа с документооборотами заключается в двух основных моментах:
* получение актуального [статуса](https://github.com/skbkontur/extern-api-docs/blob/master/manuals/Статусы%20ДО.md) документооборота
* формирование нужных документов в нужный момент времени

## Категории документооборотов
Существуют две категории документооборотов:
* Исходящие - организация отправляет документы в контролирующий орган, в эту категорию входит подавляющее большинство существующих типов документооборотов
* Входящие - контролирующий орган направляет какие-то запросы организации, сюда относятся письма и касательно ФНС ещё есть требования

В целом принципы работы с документооборотами обоих типов одинаковы, и методы работы с ними используются одни и теже. Но у входящих есть некоторые особенности, об этом поговорим отдельно [->](https://github.com/skbkontur/extern-api-docs/blob/master/Входящий%20ДО.md)

## Методы API Контур.Экстерна для работы с документооборотами
Подробная спецификация методов показана в сваггере в разделе [Docflows](http://extern-api.testkontur.ru/swagger/ui/index#/Docflows).

### Получение документооборота
Метод: [GET DocflowAsync](http://extern-api.testkontur.ru/swagger/ui/index#!/Docflows/Docflows_GetDocflowAsync)
С помощью этого метода можно получить всю информацию о документообороте, такую как:
* его текущий статус
* мета-информацию документооборота
* перечень всех документов, созданных в ходе документооборота, на данный момент
* и многое другое, полный ответ можно посмотреть в сваггере

Если текущий статус документооборота подразумевает необходимость отправки ответного документа в контролирующий орган, среди ссылок в ответе этого метода, будет ссылка на метод [GET ReplyDocumentAsync](http://extern-api.testkontur.ru/swagger/ui/index#!/Docflows/Docflows_GetReplyDocumentAsync).

### Получение списка документов документооборота
Метод: [GET DocumentsAsync](http://extern-api.testkontur.ru/swagger/ui/index#!/Docflows/Docflows_GetDocumentsAsync)
с помощью этого метода можно получить данные всех документов, созданных и полученных в ходе документооборота.

### Получение документа
Метод: [GET DocumentAsync](http://extern-api.testkontur.ru/swagger/ui/index#!/Docflows/Docflows_GetDocumentAsync).
C помощью этого метода можно получить отдельный документ, созданный или полученный в ходе документооборота, с его описанием и контентами.

### Получение описания документа
Метод: [GET DocumentDescriptionAsync](http://extern-api.testkontur.ru/swagger/ui/index#!/Docflows/Docflows_GetDocumentDescriptionAsync).
Данный метод позволяет отдельно получить описание документа, входящего в документооборот.

### Получение зашифрованного контента документа
Метод: [GET EncryptedDocumentContentAsync](http://extern-api.testkontur.ru/swagger/ui/index#!/Docflows/Docflows_GetEncryptedDocumentContentAsync).

### Получение расшифрованного контета документа
Метод: [GET DecryptedDocumentContentAsync](http://extern-api.testkontur.ru/swagger/ui/index#!/Docflows/Docflows_GetDecryptedDocumentContentAsync).
Наличие расшифрованного контента возможно не для всех документов.

### Получение подписей под документом
Метод: [GET DocumentSignaturesAsync](http://extern-api.testkontur.ru/swagger/ui/index#!/Docflows/Docflows_GetDocumentSignaturesAsync).
В некоторых случаях у документа может быть несколько подписей. В ответе будут возвращены все подписи под запрашиваемым документом.

### Получение конкретной подписи под документом
Метод: [GET DocumentSignatureAsync](http://extern-api.testkontur.ru/swagger/ui/index#!/Docflows/Docflows_GetDocumentSignatureAsync).
В ответе будет метаинфомарция подписи и ссылка на её контент.

### Получение контента конкретной подписи под документом
Метод: [GET DocumentSignatureContentAsync](http://extern-api.testkontur.ru/swagger/ui/index#!/Docflows/Docflows_GetDocumentSignatureContentAsync).

### Генерация ответного документа
Метод: [GET ReplyDocumentAsync](http://extern-api.testkontur.ru/swagger/ui/index#!/Docflows/Docflows_GetReplyDocumentAsync).
Документооборот подразумевает под собой последовательный обмен документами согласно регламенту. Поэтому в ответ на получаемые от контролирующего органа документы необходимо отправлять определенные ответные документы. Этот метод помогает формировать подобные документы. Также необходимые ссылки

### Отправка ответного документа
Метод: [POST ReplyDocumentAsync](http://extern-api.testkontur.ru/swagger/ui/index#!/Docflows/Docflows_SendReplyDocumentAsync)
После работы с методом [GET ReplyDocumentAsync](http://extern-api.testkontur.ru/swagger/ui/index#!/Docflows/Docflows_GetReplyDocumentAsync) полученный в результате документ необходимо подписать, и вместе с подписью направить в контролирующий орган. С помощью этого метода это можно сделать. Также ссылка на этот метод будет в ответе предыдущего метода [GET ReplyDocumentAsync](http://extern-api.testkontur.ru/swagger/ui/index#!/Docflows/Docflows_GetReplyDocumentAsync)

### Получение списка документооборотов
Метод:
С помощью этого метода можно получить список всех документооборотов абонента, при этом можно применить различные фильтры, чтобы получить необходимую выборку интересных на данный момент документооборотов.

### Лента событий документооборотов
Метод:
Это по сути новости документооборота, то есть последовательность изменений определенного списка документооборотов. На основе это ленты, к примеру, можно организовать оперативное уведомление пользователей об изменениях в их документоборотах, таких как получение новые документов от контролирующих органов.
возможно будет отдельная страница, зависит от объема информации

### Печать документов
Метод:
Печать документов происходит только после проверки подписей под печатаемыми документами, тем самым подтверждается валидность и неизменность печатаемых документов.
